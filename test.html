<html>

<head>
    <script src="https://ajax.googleapis.com/ajax/libs/jquery/1.12.0/jquery.min.js"></script>
    <script src="spin.min.js"></script>
    <script src="http://malsup.github.com/jquery.form.js"></script> 

    <script>
        var opts = {
          lines: 7 // The number of lines to draw
        , length: 10 // The length of each line
        , width: 8 // The line thickness
        , radius: 42 // The radius of the inner circle
        , scale: 1 // Scales overall size of the spinner
        , corners: 0 // Corner roundness (0..1)
        , color: '#000' // #rgb or #rrggbb or array of colors
        , opacity: 0.25 // Opacity of the lines
        , rotate: 0 // The rotation offset
        , direction: 1 // 1: clockwise, -1: counterclockwise
        , speed: 2 // Rounds per second
        , trail: 50 // Afterglow percentage
        , fps: 20 // Frames per second when using setTimeout() as a fallback for CSS
        , zIndex: 2e9 // The z-index (defaults to 2000000000)
        , className: 'spinner' // The CSS class to assign to the spinner
        , top: '50%' // Top position relative to parent
        , left: '50%' // Left position relative to parent
        , shadow: false // Whether to render a shadow
        , hwaccel: false // Whether to use hardware acceleration
        , position: 'absolute' // Element positioning
        };
        
        $(document).ready(function () {
              
            
            $("#run11").click(function () {
                $("#sam_display").html("");
            });
            
            $("#run22").click(function () {
                $("#process_display").html("");
            });
            var spinner;
//            $('#uploadForm').beforeSubmit(function(arr, form, options){
//                spinner = new Spinner(opts).spin(document.getElementById('spin1'));
//            });
            $("#uploadForm").submit(function(event){
                spinner = new Spinner(opts).spin(document.getElementById('spin1'));
            });
            $('#uploadForm').ajaxForm(function(responseText, statusText, xhr, formElement) {
                var obj = (responseText);
                $("#sam_display").html(obj.sam_output);
                $("#process_display").html(obj.process_output);
                spinner.stop();
//                console.log(statusText)
//                console.log(xhr)
//                console.log(formElement)
                alert("Upload successful!"); 
            }); 
        });
    </script>
</head>

<body>
    <form ref='uploadForm' 
			id='uploadForm' 
			action='http://159.203.243.231:8081/file-upload' 
			method='post' 
			encType="multipart/form-data">
				<input type="file" name="sampleFile" />
				<input type='submit' value='Upload!' />
    </form>    
    
<!--    <button id="run1">Print SAM File</button>-->
    <h1>SAM Output</h1>
    <button id="run11">Clear SAM File Output</button>
    <div id="spin1"></div>
    <div id="sam_display"></div>
    
<!--    <button id="run2">Run2 2and Output Process</button>-->

    
    
    <h1>Process Output</h1>
    <button id="run22">Clear Process Output</button>
    <div id="spin2"></div>
    <div id="process_display"></div>
</body>

</html>